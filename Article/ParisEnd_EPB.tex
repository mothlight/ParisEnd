\documentclass[Crown,sageh,times]{sagej}
\usepackage{moreverb,url}
%\usepackage[bookmarksopen,bookmarksnumbered,citecolor=black,urlcolor=black]{hyperref}
\newcommand\BibTeX{{\rmfamily B\kern-.05em \textsc{i\kern-.025em b}\kern-.08em
T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\def\volumeyear{2017}

\RequirePackage[citecolor=0 0 0,colorlinks=false]{hyperref}
\hypersetup{
     breaklinks=true,
     bookmarksopen=true,
     bookmarksnumbered=true,
     linkcolor=black,
     urlcolor=black,
     citecolor=black,
     colorlinks=true}


%%% The amssymb package provides various useful mathematical symbols
%\usepackage{amssymb}
%%% The amsthm package provides extended theorem environments
% \usepackage{amsthm}
% \usepackage{amsmath}
% \usepackage{color}
% \usepackage{amsmath}
%\usepackage{siunitx}
%\usepackage{framed} % Framing content
%\usepackage{multicol} % Multiple columns environment
%\usepackage{nomencl} % Nomenclature package
%\makenomenclature
%%\setlength{\nomitemsep}{-\parskip} % Baseline skip between items
%\setlength{\nomitemsep}{0.01cm}
%\renewcommand*\nompreamble{\begin{multicols}{2}}
%\renewcommand*\nompostamble{\end{multicols}}
%\newcommand{\degreeC}{\ensuremath{^\circ}C }
\usepackage{eurosym}
\usepackage{booktabs}



\begin{document}

\runninghead{Nice et al.}
\title{The `Paris-end' of town? Urban typology through machine learning.}

\author{Kerry A. Nice\affilnum{1}, Jason Thompson\affilnum{1}, Jasper S. Wijnands\affilnum{1}, Gideon D.P.A. Aschwanden\affilnum{1}, and Mark Stevenson\affilnum{1}}

\affiliation{\affilnum{1}Transport, Health, and Urban Design Hub, Faculty of Architecture, Building, and Planning, University of Melbourne, Victoria 3010, Australia}


\corrauth{Kerry A. Nice, Transport, Health, and Urban Design Hub, Faculty of Architecture, Building, and Planning, University of Melbourne, Victoria 3010, Australia}

\email{kerry.nice@unimelb.edu.au}


\begin{abstract}

The confluence of recent advances in availability of geospatial information, computing power, and artificial intelligence offers new opportunities to understand how and where our cities differ or are alike. Departing from a traditional `top-down' analysis of urban design features, this project analyses millions of images of urban form (consisting of street view, satellite imagery, and street maps) to find shared characteristics. A (novel) neural network-based framework is trained with imagery from the largest 1692 cities in the world and the resulting models are used to compare within-city locations from Melbourne and Sydney to determine the closest connections between these areas and their international comparators. This work demonstrates a new, consistent, and objective method to begin to understand the relationship between cities and their health, transport, and environmental consequences of their design. The results show specific advantages and disadvantages using each type of imagery. Neural networks trained with map imagery will be highly influenced by the mix of roads, public transport, and green and blue space as well as the structure of these elements. The colours of natural and built features stand out as dominant characteristics in satellite imagery. The use of street view imagery will emphasise the features of a human scaled visual geography of streetscapes. Finally, and perhaps most importantly, this research also answers the age-old question, ``Is there really a `Paris-end' to your city?''.
\end{abstract}

\keywords{machine learning, urban typology, urban design, transport, health}

\maketitle



\section{Introduction}\label{sec:introduction}

Cities are now home to the majority of the world's population with trends predicting increasing growth in urbanisation \cite{UNDESA2015,WHO2016,ABS2008}. The top 1700 large cities (with populations exceeding 300,000 residents) contained 2.2 billion people or approximately 31\% of the world's population in 2015 \cite{UN2014}. Continued growth and urbanisation will cause increasing challenges for planners and policy makers to accommodate and provide suitable environments for these populations.

The form a city takes and the way land is allocated can have a detrimental impact on population health and well-being, including car dependency, physical inactivity, and associated illness such as obesity and road trauma \cite{Giles-corti2016,Kleinert2016,Goenka2016,Zapata-Diomedi2017,Heesch2014,Daley2011, Cepeda2016,MingWen2008,Norman2006,Thompson2018b}. Policy-makers and urban/transport planners have an opportunity to reverse this situation by embracing strategies that pro-actively support safe active transport modes as facilitated by urban designs witnessed in some countries around the world. However, understanding the association between urban design features, transport networks, or environmental outcomes remains difficult, especially when underlying data, locations, methods, and demographics upon which statistical models are built vary considerably. As a result, globally consistent comparisons between cities are difficult to achieve. 

Attempts to find quantitative methods, to create city typologies to assess, describe, and classify different types of urban form have been under way for a number of decades. First attempts used broad demographics and functional characteristics to classify different types of cities. Occupational and employment figures were used to determine a city's most important economic activity (including manufacturing, retail, diversified, wholesale, transportation, mining, education, and resorts) \cite{Harris1943}. Other studies used economic activity data to classify cities into broad functional typologies, such as manufacturing, retail, professional services, and financial services \cite{Nelson1955}. Bruce \cite{Bruce1971} performed a cluster analysis based on the socio-economic profiles of selected cities as well as a number of census based statistics to group them into clusters. However, in these studies, the resulting typologies are more functional in nature, making the contribution of urban design difficult to examine.

New techniques to define city typologies emerged in the 1980s and 90s with the growing availability of databases of spatial data and increased computing power. Much of this work focused on road infrastructure in cities, and drew from the structural sociology field, in which groups of people were represented as part of a broader network structure. The `space syntax' of Hillier \cite{Hillier1996} established a correlation between configurations of urban forms and variations of human interactions within it. 

Other recent remote-sensing based methods depart from the pure network analysis methods to derive urban typologies. Night-time light data has been used to categorise cities into stages of urbanisation and levels of economic activities \cite{Zhang2013}. Urban metrics (road geometry, building dimensions and heights, and vegetation heights) have also been used to classify cities into typologies of differing periods of historical design and urban planning (i.e. 19th Century, 1950s, 1970s, etc.) \cite{Hermosilla2014}.

Still, most methods described above require some amount of subjective classification of local input data; the quality and availability of which can vary widely across collection or political districts. To overcome these limitations, utilising recent advances in computing power, artificial intelligence, and urban imagery, we therefore demonstrate an entirely new `bottom-up' approach. We train three neural networks to recognise specific cities using millions of street view, satellite, and digital street map images, and perform a case study using two Australian cities, Melbourne and Sydney. Paris, France is an iconic international city \cite{Anholt2006} with widely recognisable visual elements \cite{Doersch2012}, leading many cities (including Melbourne and Sydney) to claim that they have a `Paris-end' of town \cite{Williams2010}, or are a `Paris on the [insert name of local river]' \cite{Wilden2013} (e.g. `Paris on the Yarra'). This study examines whether Melbourne or Sydney truly claim to have a `Paris-end' and demonstrates a new fundamental methodology to objectively analyse urban areas using big data imagery.

\section{Methods}\label{sec:methods}
\subsection{Neural network}\label{sec:methods1}

The methods applied in this study are based on artificial intelligence, in particular deep neural networks \cite{Bishop1995,Samarasinghe2016,Graupe2013}. Neural network architectures that have proven to be particularly successful at image recognition tasks are convolutional neural networks \cite{Schmidhuber2015}. The model for image recognition used in this study is based on the Inception V2 architecture \cite{Szegedy2015,Ioffe2015}. 


\subsection{Imagery sampling}\label{sec:methods2}

The concept employed in this study was to train a model to correctly recognise individual cities based on examples of different types of urban imagery (street maps, satellite remote sensing, and street view images). The resulting model could then make predictions as to where entirely new images it was presented with were from. Specifically, the assumption was that, if presented with an image of a city that was not Paris but the model `thought' that it was, then the sample city image presumably contained features that were `Paris-like' in nature. 

1692 cities with populations $>$ 300,000 people were initially selected for analysis \cite{UN2014}. Data from Google Maps and Baidu Maps were used to identify urban form for each city in a globally consistent framework. The sampling area for each city was chosen as a circular area aligned to the city's centre, where the radius $r$ (km) of the sampling area was determined based on the population size $p$ according to Barthelemy \cite{Barthelemy2016}: 

\begin{equation}
r = \sqrt{ \frac{28.27}{\pi} \bigg( \frac{p}{300,000}  \bigg)^{0.85} }
\end{equation}

Having identified individual cities, a two-stage sampling approach was applied. Firstly, a sampling area extending 1.5 km from the identified city centroid \cite{UN2014} was set as a baseline. As sample cities' populations increased in size, the sampling area increased by a power of 0.85 to the proportional increase in population size \cite{Barthelemy2016}. Standardising the sampling area in this manner avoided socio-political discrepancies relating to a city's `true' boundary and captured differences in population density and shape between small (e.g., Wellington, New Zealand; Izmit, Turkey) and global mega-cities (e.g., Tokyo, Japan;  Delhi, India). Location sampling areas were adjusted for the earth's curvature \cite{Sinnott1984}. Large water-bodies (e.g., oceans but not coastlines) were removed from the sampling area, as they were not indicative of urban form . 

These procedures result in a population and water body-adjusted circular area centred on the city's central coordinates. For example, Fig \ref{fig:hongkong} shows the resulting sampling locations for Hong Kong.



\begin{figure}[!htbp] 
\centering    
\includegraphics[scale=0.5]{Images/PlosOne/Fig1.png} 
\caption{\bf Randomly generated locations to sample urban form in Hong Kong.} 
\label{fig:hongkong}  
\end{figure}



\label{methodsimagery}
\subsection{Imagery sources}

Three neural networks (see Table \ref{tab:neuralnetworks}) were trained using street maps, satellite imagery, and street view imagery from each city. Images were downloaded from each of the following sources, using the appropriate APIs. Imagery from Sydney and Melbourne were excluded as they were included in the evaluation dataset. 


\begin{table}[!htbp]
\caption{\bf Neural networks trained and evaluated in this study \label{tab:neuralnetworks}}     
\begin{tabular}{ l l }
 \hline Abbreviation   &  Imagery source \\ \hline
GM & Google Static Maps API, image type of `map'     \\ 
GS & Google Static Maps API, image type of `satellite'      \\
GSV-BSV & Google Street View API/Baidu Street View API     \\ \hline

\end{tabular}
\end{table}

The first neural network (referred to as GM) used Google Maps images as training material. Images were sized 256 by 256 pixels using a zoom level of 16 (approximately 400x400m). These were obtained from the selected locations using a custom style defined with the Google Static Maps API \cite{GoogleStatic2017} (see Fig \ref{fig:maps} for examples of Paris, France). The images provide a high-level abstraction of road (black) and public transport (orange) networks, green space (green), and water bodies (blue). Any remaining space is coded white. Due to mapping inconsistencies in South Korea, all 25 South Korean cities were removed from the dataset, reducing the number of cities to 1665. 1000 training images were used per city (for this neural network as well as the following two), for a total data set of 1,665,000 images in 1665 classifications. 



\begin{figure}[!htbp]
    \centering    
\includegraphics[scale=1]{Images/PlosOne/Fig2.png}  
\caption{\bf Four sample GM neural network training data images for Paris, France \cite{GoogleStatic2017}}    
 \label{fig:maps}  
\end{figure} 


The second neural network (referred to as GS), used Google Maps Satellite imagery obtained through the Google Static Maps API \cite{GoogleStatic2017}. Image type was set to `satellite' using a zoom level of 16 and image size of 256x256. Suitable imagery was not available for two cities, bringing the number of cities to 1688 (also excluding Melbourne and Sydney) and a total data set of 1,688,000 images. Fig \ref{fig:satbeiade} shows four sample images, two each of Adelaide, Australia and Beijing, China. 




\begin{figure}[!htbp]
\centering 
\includegraphics[scale=1]{Images/PlosOne/Fig3.png}     
\caption{\bf Sample GS neural network training data images for Adelaide, Australia and Beijing, China. \cite{GoogleStatic2017}}    
 \label{fig:satbeiade}  
\end{figure} 




The third neural network (referred to as GSV-BSV) used street view imagery obtained through a combination of Google Street View (GSV) \cite{GoogleMaps2017b} and Baidu Maps Street View (BSV) \cite{Baidu2017}. 1000 images each were sampled for the 1074 cities for which imagery was available (a total of 1,074,000 images) at a 256x256 resolution, a pitch of 0, a field of view of 90 degrees, and a random heading from 0 to 359 degrees. Images inside tunnels, indoor locations, dark locations, or otherwise unusable images were removed and replaced by re-sampling.

No street view imagery of China was available through GSV, so BSV was used instead.  In order to minimise the differences between the two data sources and to minimise strong country-specific items (e.g. text on road signs) influencing neural network training, further image processing was performed to segment each image before use in training and evaluation. The Python module \textit{pymeanshift} \cite{Pymeanshift2017} was used to segment each image\endnote{Using a spatial radius of 6, range radius of 4.5, and minimum density of 50.}. Fig \ref{fig:gsvbsv} shows an example of an original GSV image (Sydney, Australia) and its segmented version as well as an original BSV image (Beijing, China) and its segmented version.

%Melbourne maps 22996
%Sydney maps 24589
%Melbourne satellite 23027
%Sydney satellite 24596
%Melbourne street 20971
%Sydney street 14644



\begin{figure}[!htbp]
\includegraphics[scale=0.3]{Images/PlosOne/Fig4.png} 
\caption{\bf Sample GSV neural network training data image from Sydney, Australia \cite{GoogleMaps2017b} (A) and the processed segmented version (B). Sample BSV neural network training data image from Beijing, China \cite{Baidu2017} (C) and the processed segmented version (D).}    
 \label{fig:gsvbsv}  
\end{figure} 




Images from Sydney and Melbourne, Australia were excluded from the training data and were instead used for evaluation. This evaluation data was sampled at a 400m grid resolution across the greater metropolitan areas, with 23,027 possible locations for Melbourne and 24,596 for Sydney using identical methods described above for the training data. Availability of imagery for GSV at these locations was 59.5\% and 91.1\% respectively. The sampled Melbourne area contained a much higher percentage of rural areas without roads (the primary location for GSV imagery) than the sampled Sydney area.


\subsection{Neural network training}\label{sec:methods4}    

The Inception V2 network was used in this study and the three networks (GM, GS, and GSV-BSV) were trained with 256x256 sized imagery. The Inception network was calibrated using supervised learning with the generated dataset to identify the name of the city based on a supplied image. Several pre-processing steps were performed before supplying the image to the neural network. Images were randomly cropped from 256x256x3 to Inception V2's native 224x224x3 resolution. No zooming was applied, the aspect ratio was kept fixed, and colour transformations were not used. All images were normalised to [-1, 1] by subtracting a colour value of 128 from each pixel and multiplying by 1/128. To ensure good mixing, training images were randomly allocated to batches. Validation images (25\% of the 1000 training images for each city were reserved as validation data) were transformed to 224x224x3 using central cropping.


To update weights in the neural network, a loss function was specified to quantify the extent of any current misclassifications, namely the cross entropy calculated on the softmax layer. Model parameters were calibrated by minimising this loss function using Stochastic Gradient Descent with Nesterov momentum of 0.9. Other parameters included a batch size of 64 samples, reducing learning rate starting at 0.9 per batch, batch normalisation, a dropout rate of 0.2 after the final average-pooling operations, and an L2 regularisation weight per sample of 0.0001. Each model was trained until convergence for a total of 150 epochs, using the Microsoft Cognitive Toolkit (CNTK) \cite{Yu2015}. 


\subsection{Neural network inference}\label{sec:methods5}    
Using the three trained models, inferences were performed using the evaluation datasets for Melbourne and Sydney. As Melbourne and Sydney are not present in the training data, the neural network was forced to choose the city with the most similar characteristics for each of the sampled locations. Using these predictions, every location in both cities was determined to be `most like' another world city from the list due to  characteristics contained within the street map, satellite, or street-view image.



\section{Results}\label{sec:results}

Using 25\% of the training data, validation was performed on each model. The model for GM, GS, and GSV-BSV reached a validation accuracy of 73.2\% (top 5: 85.0\%), 99.4\% (top 5: 99.97\%), and 43.1\% (top 5: 69.8\%), respectively.

The resulting predictions from model inference of the evaluation data were analysed in various ways. First, the top 20 predicted cities for the evaluation points for each imagery data set were calculated (see Tables \ref{tab:melbournesydneyGM}, \ref{tab:melbournesydneyGS}, and \ref{tab:melbournesydneyGSV} for GM, GS, and GSV-BSV).

\subsection{Top 20 predicted cities} 

The GM (map view) neural network predictions (Table \ref{tab:melbournesydneyGM}) are dominated by other Australian cities (Brisbane, Canberra, Sunshine Coast, Gold Coast, Newcastle and Lake Macquarie, Perth, and Adelaide) as well as a number of cities from Israel, South Africa, and the United States. Alternative Australian cities make up nearly 31\% of the top 20 predictions for Melbourne and 28\% for Sydney. Melbourne and Sydney also show strong similarities with each other with the neural network considering them similar to the same 12 cities out of the top 20 predictions.



\begin{table}[!htbp]
%\begin{adjustwidth}{-2.25in}{0in}
\caption{\bf Top 20 cities like Melbourne and Sydney through GM \label{tab:melbournesydneyGM}}     
\begin{tabular}{ l l l l l}
 \hline    &  \multicolumn{2}{c}{\textbf{Melbourne evaluation}} & \multicolumn{2}{c}{\textbf{Sydney evaluation}}  \\  
\textbf{Predicted city} & \textbf{Matches} & \textbf{\% matching}  & \textbf{Matches} & \textbf{\% matching}\\ \hline

Brisbane, Australia & 4062 & 17.6 & 2922 & 11.9      \\ 
Beer Sheva, Israel & 1671 & 7.3 & 3479 & 14.1      \\ 
Canberra, Australia & 1074 & 4.7 & 1770 & 7.2      \\
Sunshine Coast, Australia & 960 & 4.2 & 456 & 1.9      \\
McAllen, United States of America & 794 & 3.5 & 140 & 0.6      \\
Valpara\'{i}so, Chile & 431 & 1.9 & 383 & 1.6      \\
Haifa, Israel & 372 & 1.6 & 723 & 2.9      \\
Gold Coast, Australia & 361 & 1.6 & 265 & 1.1      \\
Newcastle and Lake Macquarie, Australia & 347 & 1.5 & 1214 & 4.9      \\
Toronto, Canada & 325 & 1.4 & 209 & 0.9      \\
Kitwe, Zambia & 303 & 1.3 & - & -      \\
Pretoria, South Africa & 303 & 1.3 & - & -      \\
Auckland, New Zealand & 285 & 1.2 & 293 & 1.2      \\
Johannesburg, South Africa & 239 & 1.0 & - & -      \\
Perth, Australia & 216 & 0.9 & 111 & 0.5      \\
Philadelphia, United States of America & 185 & 0.8 & - & -      \\
Washington, D.C., United States of America & 174 & 0.8 & - & -      \\
Port Elizabeth, South Africa & 162 & 0.7 & - & -      \\
Virginia Beach, United States of America & 143 & 0.6 & 235 & 1.0      \\
Jerusalem, Israel & 142 & 0.6 & 393 & 1.6      \\
Tasikmalaya, Indonesia & - & - & 238 & 1.0      \\		
London, United Kingdom & - & - & 199 & 0.8      \\
Adelaide, Australia & - & - & 152 & 0.6      \\
Denton-Lewisville, United States of America & - & - & 143 & 0.6      \\						
Hong Kong, China, Hong Kong SAR & - & - & 121 & 0.5      \\		
Osaka, Japan & - & - & 113 & 0.5      \\

\hline
\end{tabular}
%\end{adjustwidth}
\end{table}

The GS (satellite view) neural network predictions (Table \ref{tab:melbournesydneyGS}) shows wider divergences from other Australian cities and between Melbourne and Sydney themselves, with both often matched to Brazilian cities. Melbourne is matched to Brazil in 39.5\% of the evaluation locations while Sydney is matched to Brazilian cities in 50.3\%. Melbourne and Sydney show wider divergences from each other using the GS network in comparison to the GM network, only having 7 of the top 20 predicted cities in common. In diverging predictions, 13.6\% of Melbourne is confused with Wellington, New Zealand while 13.7\% of Sydney is considered similar to Sevastopol, Ukraine. 

\begin{table}[!htbp]
%\begin{adjustwidth}{-2.25in}{0in}
\caption{\bf Top 20 cities like Melbourne and Sydney through GS \label{tab:melbournesydneyGS}}     
\begin{tabular}{ l  l l l  l}
 \hline    &  \multicolumn{2}{c}{\textbf{Melbourne evaluation}} & \multicolumn{2}{c}{\textbf{Sydney evaluation}}  \\  
\textbf{Predicted city} & \textbf{Matches} & \textbf{\% matching}  & \textbf{Matches} & \textbf{\% matching}\\ \hline
Jundia\'{i}, Brazil & 6509 & 28.3 & 6478 & 26.3 \\ 
Wellington, NZ & 3124 & 13.6 & 161 & 0.7 \\ 
Adelaide, Australia & 1624 & 7.1 &-&- \\ 
Campinas, Brazil & 1408 & 6.1 & 4088 & 16.6 \\ 
Miami, United States of America & 1095 & 4.8 &-&- \\ 
Provo-Orem, United States of America & 1022 & 4.4 &-&- \\ 
Macap\'{a}, Brazil & 614 & 2.7 &-&- \\ 
Rosario, Argentina & 542 & 2.4 & 1006 & 4.1 \\ 
Gold Coast, Australia & 463 & 2.0 &-&- \\ 
Catania, Italy & 410 & 1.8 &-&- \\ 
Juiz De Fora, Brazil & 411 & 1.8 & 1481 & 6.0 \\ 
Buenos Aires, Argentina & 392 & 1.7 &-&- \\ 
Canberra, Australia & 372 & 1.6 & 170 & 0.7 \\ 
Palma, Spain & 323 & 1.4 &-&- \\ 
Newcastle and Lake Macquarie, Australia & 274 & 1.2 & 152 & 0.6 \\ 
Sunshine Coast, Australia & 228 & 1.0 &-&- \\ 
Surakarta, Indonesia & 214 & 0.9 &-&- \\ 
Johannesburg, South Africa & 212 & 0.9 &-&- \\ 
Palm Bay-Melbourne, United States of America & 176 & 0.8 &-&- \\ 
Bel\'{e}m, Brazil & 169 & 0.7 &-&- \\ 
Sevastopol, Ukraine &-&- & 3360 & 13.7\\ 
Belgaum, India &-&- & 1177 & 4.8\\ 
Memphis, United States of America &-&- & 604 & 2.5\\ 
Baaqoobah, Iraq &-&- & 442 & 1.8\\ 
Nagasaki, Japan &-&- & 359 & 1.5\\ 
Qazvin, Iran &-&- & 303 & 1.2\\ 
Guayaquil, Ecuador &-&- & 216 & 0.9\\ 
Malaga, Spain &-&- & 201 & 0.8\\ 
Campos dos Goytacazes, Brazil &-&- & 197 & 0.8\\ 
Guangyuan, China &-&- & 147 & 0.6\\ 
New Orleans, United States of America &-&- & 147 & 0.6\\ 
Chiinu, Republic of Moldova &-&- & 146 & 0.6\\ 
Baixada Santista, Brazil &-&- & 135 & 0.6\\ \hline
\end{tabular}
%\end{adjustwidth}
\end{table}


The GSV-BSV (street view) neural network predictions (Table \ref{tab:melbournesydneyGSV}) show strong similarities between Melbourne and Sydney. In the Melbourne evaluation, just over 30\% (7 of the top 8 picks) are other Australian cities, while Sydney matched other Australian cities in 34.6\% of the evaluation locations (and were 7 of the top 7 picks). In addition, 16 of the top 20 predicted cities were shared between Melbourne and Sydney. But while the top GM predictions are dominated mostly by Brisbane and Canberra, the top GSV-BSV predictions are spread evenly among a wider range of Australian cities.


\begin{table}[!htbp]
%\begin{adjustwidth}{-2.25in}{0in}
\caption{\bf Top 20 cities like Melbourne and Sydney through GSV-BSV \label{tab:melbournesydneyGSV}}     
\begin{tabular}{ l  l l l  l}
 \hline    &  \multicolumn{2}{c}{\textbf{Melbourne evaluation}} & \multicolumn{2}{c}{\textbf{Sydney evaluation}}  \\  
\textbf{Predicted city} & \textbf{Matches} & \textbf{\% matching}  & \textbf{Matches} & \textbf{\% matching}\\ \hline
Perth, Australia & 1424 & 6.8 & 497 & 3.4 \\ 
Adelaide, Australia & 1349 & 6.4 & 346 & 2.4 \\ 
Sunshine Coast, Australia & 1344 & 6.4 & 1139 & 7.8 \\ 
Auckland, New Zealand & 930 & 4.4 & 242 & 1.7 \\ 
Canberra, Australia & 714 & 3.4 & 770 & 5.3 \\ 
Newcastle and Lake Macquarie, Australia & 669 & 3.2 & 789 & 5.4 \\ 
Gold Coast, Australia & 470 & 2.2 & 702 & 4.8 \\ 
Brisbane, Australia & 384 & 1.8 & 828 & 5.7 \\ 
Curitiba, Brazil & 379 & 1.8 & 131 & 0.9 \\ 
Stockton, United States of America & 366 & 1.8 & 184 & 1.3 \\ 
Christchurch, New Zealand & 339 & 1.6 &-&- \\ 
Concord, United States of America & 330 & 1.6 & 131 & 0.9 \\ 
Cape Town, South Africa & 285 & 1.4 & 132 & 0.9 \\ 
Bonita Springs-Naples, United States of America & 274 & 1.3 & 141 & 1.0 \\ 
Teeside , United Kingdom & 262 & 1.3 &-&- \\ 
East London, South Africa & 253 & 1.2 & 150 & 1.0 \\ 
West Yorkshire, United Kingdom & 248 & 1.2 &-&- \\ 
Los Angeles, United States of America & 203 & 1.0 &-&- \\ 
San Diego, United States of America & 197 & 0.9 & 300 & 2.0 \\ 
Vereeniging, South Africa & 188 & 0.9 & 145 & 1.0 \\ 
Jacksonville, Florida, United States of America  &-&- & 156 & 1.1\\ 
Virginia Beach, United States of America  &-&- & 152 & 1.0\\ 
McAllen, United States of America&-&- & 123 & 0.8\\ 
Corpus Christi, United States of America&-&- & 97 & 0.7\\ \hline
\end{tabular}
%\end{adjustwidth}
\end{table}

To explore the identified differences, cities predicted for an evaluation location were plotted on maps of Melbourne and Sydney, with the colour scheme for the plots determined by the latitude and longitude of the predicted city. This colour scheme is shown in Fig \ref{fig:colorscheme}. 



\begin{figure}[!htbp]
\centering    
\includegraphics[scale=0.25]{Images/PlosOne/Fig5.png} 
\caption{\bf Latitude/longitude based colour scheme for plotting cities-like for Melbourne and Sydney evaluations.}    
 \label{fig:colorscheme}  
\end{figure} 



\subsection{Melbourne evaluation} 

Fig \ref{fig:melmaps} shows the top predicted cities ($>$ 0.3\%) plotted against the Melbourne evaluation locations for the GM neural network. Further, `Paris-like' evaluation locations within Melbourne and Sydney are highlighted with black stars (22 in total). As can be seen, Australian cities show strong groupings in the inner and outer suburbs while the central business district (CBD) region shows no single strong grouping of regions or specific cities. In Melbourne's far outer suburbs and rural areas, a wide mix of North and South American, South African, European, and Mid-Eastern cities with small localised clusters of each can be seen. In the CBD, a few locations are predicted as Paris (see detail of the CBD in Fig \ref{fig:melmapscbd}), and are mostly associated with Docklands or parklands.


\begin{figure}[!htbp]
\centering   
\includegraphics[scale=0.33]{Images/PlosOne/Fig6.png}  
\caption{\bf Predicted similar cities using the GM neural network. Top predicted cities plotted using Fig \ref{fig:colorscheme} colour scheme for Melbourne evaluation locations (top) and Sydney (bottom). Predicted Paris locations marked with black stars.}    
 \label{fig:melmaps}  
\end{figure} 



\begin{figure}[!htbp]
\centering     
\includegraphics[scale=0.40]{Images/PlosOne/Fig7.png} 
\caption{\bf Predicted similar cities (showing three letter country code of city location) using the GM neural network for Melbourne evaluation locations. Detail of Melbourne CBD, with predictions of Paris highlighted in red squares.}    
 \label{fig:melmapscbd}  
\end{figure} 


Fig \ref{fig:melsat} shows the top predicted cities ($>$ 0.3\%) plotted against the Melbourne evaluation locations for the GS neural network with `Paris-like' locations again highlighted with a black star (1 location). Other Australian cities show a strong grouping in the inner and outer suburbs while the CBD region shows no single strong grouping of regions or specific cities but with a range of predictions including Miami, United States and Mendoza, Argentina. In Melbourne's far outer suburbs and rural areas, a wide mix is seen of North and South American (USA, Brazil, and Argentina), South African, European (Italy and Spain), and Mid-Eastern (Iran and Turkey) cities with small localised clusters of each. Only a single predictions of Paris, France was made by the GS neural network for any evaluation location in Melbourne.



\begin{figure}[!htbp]
\centering    
\includegraphics[scale=0.16]{Images/PlosOne/Fig8.png} 
\caption{\bf Predicted similar cities using the GS neural network. Top predicted cities plotted using Fig \ref{fig:colorscheme} colour scheme for Melbourne evaluation locations (top) and Sydney (bottom). Predicted Paris locations marked with black stars.} 
 \label{fig:melsat}  
\end{figure} 


Fig \ref{fig:melstreet} shows the top predicted cities ($>$ 0.3\%) plotted against the Melbourne evaluation locations for the GSV-BSV neural network. `Paris-like' locations are highlighted in 13 locations. The overall predictions are dominated by other Australian cities scattered widely throughout the entire greater Melbourne area. The remaining evaluation locations show no strong groupings of any predicted countries or cities. Common predictions include cities from South Africa, New Zealand, the United States, and European countries. The CBD again shows a wide scattering of predictions with no dominant single city or country.



\begin{figure}[!htbp]
\centering    
\includegraphics[scale=0.16]{Images/PlosOne/Fig9.png} 
\caption{\bf Predicted similar cities using the GSV-BSV neural network. Top predicted cities plotted using Fig \ref{fig:colorscheme} colour scheme for Melbourne evaluation locations (top) and Sydney (bottom). Predicted Paris locations marked with black stars.}   
 \label{fig:melstreet}  
\end{figure}



\subsection{Sydney evaluation} 

Fig \ref{fig:melmaps} shows the top predicted cities ($>$ 0.3\%) plotted against the Sydney evaluation locations for the GM neural network. `Paris-like' areas are highlighted in 54 locations.  Alternative Australian cities appear in the western and south eastern suburbs, while North American and European cities tend to appear in northern and southern suburbs. The CBD and central parts of the city show less single city or regional groupings but with stronger highly localised clusters of each. Some cities commonly represented in the CBD include waterfront cities such as Hong Kong, London, Toulon, and Kaohsiung. 

Fig \ref{fig:melsat} shows the top predicted cities ($>$ 0.3\%) plotted against the Sydney evaluation locations for the GS neural network. The overall predictions are dominated by cities in Brazil and other South American locations in the north and west, and Ukraine in the south. Other Australian cities are only predicted in a few locations around the city. In the CBD, predictions continue to be dominated by Brazilian cities with some more scattered predictions of cities from Japan, Haiti, and Mexico. No predictions of Paris, France were made by the GS neural network for any evaluation location in Sydney.

Fig \ref{fig:melstreet} shows the top predicted cities, plotted against the Sydney evaluation locations for the GSV-BSV neural network. Six `Paris-like' locations were observed, indicated by black stars. Results are very similar to the Melbourne evaluation. Again, the overall predictions are dominated by other Australian cities scattered widely throughout the entire greater Sydney area. The remaining predicted results show no strong groupings of any predicted countries or cities but some of the common predictions include cities from the United States, New Zealand, South Africa, and a number of European countries. The CBD shows a similar scattering of predictions with no single city or country dominating. A summary of the predicted `Paris-like' locations across all three neural networks for each city are presented in Table \ref{tab:melbournesydneyparis}.


\begin{table}[!htbp]
\caption{\bf How much are Melbourne and Sydney like Paris? \label{tab:melbournesydneyparis}}     
\begin{tabular}{ l  l l l  l}
 \hline    &  \multicolumn{2}{c}{\textbf{Melbourne}} & \multicolumn{2}{c}{\textbf{Sydney}}  \\  
\textbf{Neural network} & \textbf{Matches} & \textbf{\% matching}  & \textbf{Matches} & \textbf{\% matching}\\ \hline
GM & 22 & 0.1 & 54 & 0.22 \\ 
GS & 1 & 0.00004 & 0 & 0 \\ 
GSV-BSV & 13 & 0.06 & 6 & 0.04 \\ \hline
\end{tabular}
\end{table}

\section{Discussion}\label{sec:discussion}
This study sought to answer ``is there a `Paris-end' of Melbourne or Sydney"? As the results show, we can conclusively state that neither Melbourne or Sydney have a strong case to claim that they are like Paris or have an extensive `Paris-end' of town. Using three different trained neural networks and three different sources of imagery, very few locations in Melbourne or Sydney are confused with Paris by the neural networks. However, the process of answering this question served as a demonstration of how the combination of urban imagery and neural networks can be used in constructing urban typologies.

In looking at the few locations that are deemed to be `Paris-like', there are a number of common characteristics that stand out. A gallery of all of the images for Melbourne and Sydney that the GM neural network found were similar to Paris are presented in Fig \ref{fig:gm_mel_gallery} and \ref{fig:gm_syd_gallery}. There are a number of common elements in these images. Many show large parklands (in green) embedded in the cities. Orange lines of public transport (rail and tram) are also prominent as well as large water bodies (in blue). Large arterial and trunk roads run nearby smaller (often curving) local roads, however these local roads tend to still be larger and do not reach the small intricate layouts of some Asian cities. The GM neural network is making predictions based on mapping imagery, capturing characteristics such as the mix and detail of public transport, green space, water bodies, and the road network structure. This includes whether the roads are grid-like, the mix of arterial vs. neighbourhood roads, and their integration with the rest of the urban form. Seven Australian cities were included in the training data (Perth, Brisbane, Sunshine Coast, Gold Coast, Newcastle and Lake Macquarie, Canberra, and Adelaide) and likely share many common planning and design standards with Sydney and Melbourne, influencing the neural network's predictions. 

\begin{figure}[!htbp]
\centering   
\includegraphics[scale=0.19]{Images/PlosOne/Fig10.png}   
\caption{\bf Gallery of `Paris-like` locations in Melbourne using the GM neural network.}    
 \label{fig:gm_mel_gallery} 
\end{figure} 


\begin{figure}[!htbp]
\centering   
\includegraphics[scale=0.19]{Images/PlosOne/Fig11.png}   
\caption{\bf Gallery of `Paris-like` locations in Sydney using the GM neural network.}    
 \label{fig:gm_syd_gallery}  
\end{figure} 

Using the GS neural network, none of the evaluated locations for Sydney and only one location for Melbourne were predicted to be `Paris-like'. From an overhead remote sensing point of view, there is therefore nothing about either Melbourne or Sydney that shares similar visual characteristics with Paris, or at least there are many other cities that are more similar to Paris than Melbourne and Sydney. The GS network is more strongly influenced by larger natural and topographical features (features visible through satellite imagery) than the GM network. Outside of the immediate city centres, both Melbourne and Sydney are highly vegetated, with large percentages of the built-form concealed under tree canopies and having to conform to topography. The colours of the vegetation and soils as well as how the urban form is mixed into the canopies, hillsides, waterways and oceans are highly influential. Melbourne is built around a bay and around a north-south spine of hills while Sydney is built around the open ocean and ocean waterways as well as hilly terrain throughout the metro area. Some potential limitations in the dataset can be seen in Fig \ref{fig:melsat}. A strong north-south gradient through the plot of the Melbourne predictions suggest that the neural network detected some artefacts of the satellite imagery gathering process, such as different acquisition times of the imagery, that were not apparent to human observation. 


Finally, as the GSV-BSV neural network only picked Paris for 0.06\% of the evaluated locations for Melbourne and 0.04\% for Sydney, we can be confident that from a visual street-level view, there is almost nothing about either Melbourne or Sydney that is visually similar to Paris using this type of imagery. With the GSV-BSV network (galleries of `Paris-like' images for Melbourne and Sydney are shown in Fig \ref{fig:gsv_mel_gallery} and \ref{fig:gsv_syd_gallery}), smaller details of the cities will influence predictions. At this level of imagery, many of the natural features influential in the GS network (e.g., types and colours of vegetation or soil) will be important but smaller details will also weigh in, such as building architecture, the width (or absence) of nature strips or sidewalks, and an overall density of streetscape features. Other influential characteristics are features that are in the urban areas but are not part of the permanent built form. For example, white vans feature in a number of images in the galleries of Paris-like predictions. At this level of imagery, the neural network will be potentially influenced as much by how the urban form is being used than the form itself. This shows the importance of taking steps in some circumstances to construct abstract features from the source images (e.g. road networks/green space for GM or image segmentation for GSV-BSV). Even with these measures, some caution should be taken with this type of imagery. The rather low accuracy rate for GSV-BSV (43.1\%, top 5: 69.8\%) indicates that larger training datasets or perhaps fewer classification classes are needed with this type of complex imagery.


\begin{figure}[!htbp]
\centering    
\includegraphics[scale=0.35]{Images/PlosOne/Fig12.png}  
\caption{\bf Gallery of `Paris-like` locations in Melbourne using the GSV-BSV neural network.}    
 \label{fig:gsv_mel_gallery}  
\end{figure} 


\begin{figure}[!htbp]
\centering    
\includegraphics[scale=0.35]{Images/PlosOne/Fig13.png}  
\caption{\bf Gallery of `Paris-like` locations in Sydney using the GSV-BSV neural network.}    
 \label{fig:gsv_syd_gallery}  
\end{figure} 

Using the GM neural network approach, urban form can be evaluated. Map characteristics that are influential in grouping cities with a particular typology include extents and types of public transportation, urban green space, road network structure, water body inclusion and integration, amounts of informal unplanned open space, and density and topology influences on city structure. Some of the features included in the GM imagery that made cities `Paris-like' were a higher density of trains and trams, large broad sections of urban green space, and an integration of urban green space and waterways. Of course, while Paris was selected as the comparison city of choice, the technique makes it possible to typify the characteristics of any global city where similar imagery is available.

Using remote sensing (satellite imagery) of urban areas, natural features and the colour characteristics of rooftops, streets, soil, and vegetation feature predominantly in classifying locations within a particular typology. In Fig \ref{fig:satimages}a, satellite imagery of Melbourne shows a number of colour and terrain similarities with the GS top 6 predictions, namely Adelaide, Australia; Campinas, Brazil; Jundia\'{i}, Brazil; Miami, USA; Provo, USA; and Wellington, NZ (all shown in Fig \ref{fig:satimages}). This perhaps shows that natural characteristics are more influential to what the GS neural networks considers make cities similar than the characteristics of built urban form highlighted by the GM model.

\begin{figure}[!htbp]
\centering    
\includegraphics[scale=0.35]{Images/PlosOne/Fig14.png} 
 \caption{\bf Satellite imagery of Melbourne, Australia (A), Adelaide, Australia (B), Campinas, Brazil (C), Jundia\'{i}, Brazil (D), Miami, USA (E), Provo, USA (F), and Wellington, NZ (G) \cite{GoogleStatic2017}.}    
 \label{fig:satimages}  
\end{figure} 

Finally, in examining the results from the GSV-BSV neural network, this micro-scaled level of imagery would arguably capture the visual geography of the streetscape, what most people would say `this is what makes Paris look like Paris'. But as Doersch et al. \cite{Doersch2012} found in trying to answer the same question, overall this answer is not based on a small number of famous iconic landmarks (i.e. the Eiffel Tower, the Louvre, etc.), but on an array of widespread, smaller features. These features include elements such as cast-iron railings on balconies, grid-like balcony arrangements, distinctive street signs, streetlamps on pedestals, window balustrades, Parisian doorways,  six story Haussmann apartment buildings, and vegetation differences \cite{Li2015}. Of all these micro-scaled visual elements, neither Melbourne nor Sydney contain enough to truly have a `Paris-like' district.

\section{Conclusion}\label{sec:conclusion}

We have conclusively answered the question, does Melbourne or Sydney have a `Paris-end' of town with a definitive `no'. Our three trained neural networks concluded that at best, Sydney could be considered only 0.2\% `Paris-like' while Melbourne can only boast 0.1\%.   

Despite these potentially disappointing results (demonstrating few `Paris-like' areas of either Melbourne or Sydney), this analysis reveals a number of exciting possibilities for using neural networks to analyse urban form. Using this method, any city in the world can now also answer this question for themselves with easily obtained and globally consistent imagery. This methodology can be used to look at many different aspects of cities and understand what elements of their urban design leads them to work in different ways.

\section{Acknowledgements}
This project was made possible thanks to computer hardware purchased by the Transportation, Health, and Urban Design (THUD) Hub at the University of Melbourne. M.S. was supported by a National Health and Medical Research Council (Australia) Fellowship.

\section{Data Availability}\label{sec:methods6} 
The datasets, including raw data and trained neural network models, are available on request to the corresponding author.

\section{Author contributions statement}

K.N. designed and performed the experiment, analysed the results, and wrote the manuscript. J.T. conceived the experiment and contributed to the manuscript. J.S. designed the neural networks and contributed to the manuscript. G.A. contributed to the manuscript. M.S. reviewed the experiment and results. All authors reviewed the manuscript. 



\theendnotes

  \bibliographystyle{SageH}
  \bibliography{library}

\begin{biogs}
TODO add biographies
\end{biogs}


\end{document}

